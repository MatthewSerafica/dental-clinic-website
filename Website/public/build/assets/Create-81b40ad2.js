import{r as c,n as T,T as z,p as F,i as d,f as B,w as p,u as a,e as O,o as n,d as t,m as f,v as w,q as M,F as D,j as C,t as m,h,b as V,l as v}from"./app-cdbf4484.js";import{m as A,s as q}from"./flowbite-vue-62d8acb5.js";import{h as U}from"./index-89e1533b.js";const L=["onSubmit"],G=t("div",{class:"items-center px-4"},[t("h1",{class:"text-xl font-semibold text-gray-800"}," Book An Appointment ")],-1),J={class:"p-2"},K={class:"flex flex-row gap-12 max-md:flex-col"},Q={class:"w-[25rem]"},W={class:"w-[25rem] mb-4"},X=t("label",{for:"patientId",class:"block font-semibold"},"ID Number",-1),Z={class:"w-[25rem] mb-4"},ee=t("label",{for:"patientName",class:"block font-semibold"},"Patient Name",-1),te={class:"mb-4 w-[25rem]"},se=t("label",{for:"dentist",class:"block font-semibold"},"Dentist",-1),oe=t("option",{disabled:"",value:""}," Please select a dentist ",-1),ae=["value"],ne={key:0,class:"text-red-600"},le={class:"mb-4 w-[25rem]"},de=t("label",{for:"appointmentType",class:"block font-semibold"},"Appointment Type",-1),ie=t("option",{value:"",disabled:"",selected:""}," Please select one ",-1),re=["value"],me={key:0,class:"text-red-600"},ue={class:"w-[25rem] mb-4"},ce=t("label",{for:"appointmentDate",class:"block font-semibold"},"Appointment Date",-1),pe=["value","onClick"],_e={class:"mb-4 w-[25rem]"},be=t("label",{for:"appointmentDescription",class:"block font-semibold"},"Appointment Description",-1),fe={key:0,class:"text-red-600"},ve={class:""},ye={key:0,class:"mb-2 text-lg font-semibold text-center"},he={class:"grid grid-cols-5 gap-4 mb-4"},ge={class:"text-base"},ke={class:"text-base"},xe={key:1,class:"mb-2 text-lg font-semibold text-center"},we={class:"grid grid-cols-5 gap-4"},De={class:"text-base"},Ce={class:"text-base"},Ve={class:"mb-4"},Ae=t("button",{type:"submit",as:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 mr-3 mb-3"}," Book ",-1),Be={__name:"Create",props:{dentists:{type:Array},students:{type:Object,default:()=>({})},employees:{type:Object,default:()=>({})}},setup(P,{emit:R}){const S=()=>{R("close")},$=c({modelValue:"YYYY-MM-DD"}),Y=c([{repeat:{weekdays:[1]}}]),_=c(""),i=c({last_name:"",first_name:"",middle_name:""}),r=c({last_name:"",first_name:"",middle_name:""}),b=c("");let g=c([""]);const j=async()=>{if(_.value.length===7)try{if(_.value.includes(" ")){const s=(await v.get(`/admin/appointment/employee/${_.value}`)).data;r.value.last_name=s.last_name,r.value.first_name=s.first_name,r.value.middle_name=s.middle_name,r.value.middle_name===null?b.value=r.value.last_name+", "+r.value.first_name:b.value=r.value.last_name+", "+r.value.first_name+", "+r.value.middle_name,o.name=r.value.last_name+", "+r.value.first_name,g=(await v.get(route("admin.employee.getemployeeservice"))).data}else{const s=(await v.get(`/admin/appointment/student/${_.value}`)).data;i.value.last_name=s.last_name,i.value.first_name=s.first_name,i.value.middle_name=s.middle_name,i.value.middle_name===null?b.value=i.value.last_name+", "+i.value.first_name:b.value=i.value.last_name+", "+i.value.first_name+", "+i.value.middle_name,o.name=i.value.last_name+", "+i.value.first_name,(s.course=="Doctor of Medicine"||s.course=="BSN")&&s.year!="1st Year"?g=(await v.get(route("admin.student.getannualservices"))).data:g=(await v.get(route("admin.student.getregularservices"))).data}}catch(l){console.error(l)}else b.value=""};T(_,()=>{j()});const N=c({}),H=async(l,s)=>{try{const u=await v.get(route("admin.appointment.getAvailableTime",{id:l,date:s}));N.value=u.data}catch(u){console.error(u)}},o=z({name:null,dentist_id:null,app_date:null,app_time:null,app_type:null,pat_notes:null,time_id:null});T(()=>({dentist_id:o.dentist_id,app_date:o.app_date}),({dentist_id:l,app_date:s})=>{l&&s&&H(l,s)});const k=(l,s)=>{o.app_time=I(l),o.time_id=s};function I(l){return U(l,"hh:mm A").format("HH:mm:ss")}function x(l){return U(l,"HH:mm").format("hh:mm A")}const E=()=>o.post(route("admin.appointment.store"),{preserveScroll:!1,preserveState:!1});return(l,s)=>{const u=F("VDatePicker");return n(),d("form",{onSubmit:O(E,["prevent"])},[B(a(q),{size:"6xl",onClose:S},{header:p(()=>[G]),body:p(()=>[t("div",J,[t("div",K,[t("div",Q,[t("div",W,[X,f(t("input",{id:"patientId","onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e),type:"text",class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Enter ID Number"},null,512),[[w,_.value]])]),t("div",Z,[ee,f(t("input",{id:"patientName",type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>b.value=e),class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Patient Name",disabled:""},null,512),[[w,b.value]])]),t("div",te,[se,f(t("select",{id:"dentist","onUpdate:modelValue":s[2]||(s[2]=e=>a(o).dentist_id=e),class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},[oe,(n(!0),d(D,null,C(P.dentists,e=>(n(),d("option",{value:e.dentist_id}," Dr. "+m(e.first_name)+" "+m(e.last_name),9,ae))),256))],512),[[M,a(o).dentist_id,void 0,{number:!0}]]),a(o).errors.dentist_id?(n(),d("div",ne,m(a(o).errors.dentist_id),1)):h("",!0)]),t("div",le,[de,f(t("select",{id:"appointmentType","onUpdate:modelValue":s[3]||(s[3]=e=>a(o).app_type=e),class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},[ie,(n(!0),d(D,null,C(a(g),e=>(n(),d("option",{value:e.services},m(e.services),9,re))),256))],512),[[M,a(o).app_type]]),a(o).errors.app_type?(n(),d("div",me,m(a(o).errors.app_type),1)):h("",!0)]),t("div",ue,[ce,B(u,{id:"appointmentDate",modelValue:a(o).app_date,"onUpdate:modelValue":s[4]||(s[4]=e=>a(o).app_date=e),modelModifiers:{string:!0},"input-debounce":500,"disabled-dates":Y.value,"min-date":new Date,"max-date":new Date().setDate(new Date().getDate()+6),masks:$.value},{default:p(({togglePopover:e,inputValue:y})=>[t("input",{value:y,class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Select Appointment Date",onClick:e},null,8,pe)]),_:1},8,["modelValue","disabled-dates","min-date","max-date","masks"])]),t("div",_e,[be,f(t("textarea",{id:"appointmentDescription",class:"w-full px-3 py-2 rounded-md drop-shadow-lg","onUpdate:modelValue":s[5]||(s[5]=e=>a(o).pat_notes=e),placeholder:"Enter Appointment Description"},null,512),[[w,a(o).pat_notes]]),a(o).errors.pat_notes?(n(),d("div",fe,m(a(o).errors.pat_notes),1)):h("",!0)])]),t("div",ve,[a(o).dentist_id?(n(),d("h2",ye,"Morning Session")):h("",!0),t("div",he,[(n(!0),d(D,null,C(N.value.morning,e=>(n(),d("div",null,[e.isBooked?(n(),V(a(A),{key:1,onClick:y=>k(e.time,e.times_id),type:"button",as:"button",class:"px-4 py-4 border-2 border-red-600",color:"red",disabled:""},{default:p(()=>[t("p",ke,m(x(e.time)),1)]),_:2},1032,["onClick"])):(n(),V(a(A),{key:0,onClick:y=>k(e.time,e.times_id),type:"button",as:"button",class:"px-4 py-4 border-2 focus:bg-blue-800 focus:border-blue-800 focus:ring-blue-800 focus:text-white active:bg-blue-800 active:border-blue-800 active:ring-blue-800",outline:""},{default:p(()=>[t("p",ge,m(x(e.time)),1)]),_:2},1032,["onClick"]))]))),256))]),a(o).dentist_id?(n(),d("h2",xe,"Afternoon Session")):h("",!0),t("div",we,[(n(!0),d(D,null,C(N.value.afternoon,e=>(n(),d("div",null,[e.isBooked?(n(),V(a(A),{key:1,onClick:y=>k(e.time,e.times_id),type:"button",as:"button",class:"px-4 py-4 border-2 border-red-600",color:"red",disabled:""},{default:p(()=>[t("p",Ce,m(x(e.time)),1)]),_:2},1032,["onClick"])):(n(),V(a(A),{key:0,onClick:y=>k(e.time,e.times_id),type:"button",as:"button",class:"px-4 py-4 border-2",outline:""},{default:p(()=>[t("p",De,m(x(e.time)),1)]),_:2},1032,["onClick"]))]))),256))])])]),t("div",Ve,[f(t("input",{type:"hidden","onUpdate:modelValue":s[6]||(s[6]=e=>a(o).app_time=e)},null,512),[[w,a(o).app_time]])])])]),footer:p(()=>[t("div",{class:"flex justify-center"},[t("button",{onClick:S,type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600 mr-3 mb-3"}," Cancel "),Ae])]),_:1})],40,L)}}};export{Be as default};
