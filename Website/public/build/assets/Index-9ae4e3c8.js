import{r as h,K as J,c as E,a as Q,n as W,b as y,w as n,o as m,d as e,m as c,v as Z,u as i,x as ee,f as d,y as f,g as a,e as le,h as x,i as v,j as te,t as r,k as _,F as se,l as oe,O as ae}from"./app-cdbf4484.js";import{A as ne}from"./AddApointment-2aa6d91a.js";import{E as re}from"./Error-fb42616a.js";import{_ as ie}from"./Pagination-af17f53a.js";import{S as de}from"./Success-01c9158f.js";import ce from"./Create-b37ca77e.js";import me from"./MainLayout-ff052132.js";import{G as fe,s as $,m as k}from"./flowbite-vue-62d8acb5.js";import{h as ue}from"./index-89e1533b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./SideBar-ddd0ab5f.js";import"./SluDentalLogo-a4fb04a6.js";import"./DentistLinks-aebae790.js";import"./SideBarLinks-b569a21a.js";import"./DashboardIcon-abe5f48e.js";import"./UsersIcon-3089db95.js";import"./PatientIcon-56da3996.js";import"./PatientLinks-2a5a06a3.js";import"./AssistantLinks-c53c5408.js";import"./AdminLinks-fd8c5b60.js";import"./Header-33526c7b.js";import"./SideBarMobileView-d1951852.js";const he=e("div",{class:"flex flex-col ml-2"},[e("h1",{class:"w-20 h-8 text-2xl font-bold text-gray-700"},"Students"),e("h6",{class:"h-1 text-xs text-gray-400"},[e("a",{href:"/admin"},"Home"),a(" > Students ")])],-1),ge={class:"flex flex-col flex-grow mt-8 bg-white rounded-xl"},xe={class:"grid mt-10 mb-2 ml-10 mr-10"},pe={class:"flex justify-between w-full py-1 mx-auto sm:items-center max-sm:flex-col max-sm:gap-4"},be={class:"flex flex-row items-center gap-4"},ye={class:"relative max-sm:w-full"},ve=e("div",{class:"absolute top-0 left-0 inline-flex items-center justify-center w-10 h-full text-gray-400"},[e("svg",{class:"w-6 h-6",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),_e={class:"bg-gray-200 rounded shadow-lg"},Se={class:"hover-bg-gray-300"},we={class:"hover-bg-gray-300"},ke={class:"hover-bg-gray-300"},Ce={class:"hover-bg-gray-300"},Ae={class:"hover-bg-gray-300"},Me={class:"hover-bg-gray-300"},Oe={class:"hover-bg-gray-300"},Ee={class:"hover-bg-gray-300"},$e={class:"hover-bg-gray-300"},Ve={class:"hover-bg-gray-300"},De={class:"absolute right-[240px]"},Ue=e("div",{class:"flex items-center text-lg font-semibold"}," Upload File Here ",-1),Ie=["onSubmit"],Le={class:"flex flex-col justify-center"},Te=e("label",{class:"mb-2 ml-2 text-sm font-medium text-gray-900 dark:text-white",for:"file"},"Upload file",-1),je={class:"flex justify-end gap-4 pt-8"},Be={class:""},Fe={class:"grid mb-10 ml-10 mr-10"},Ne={class:"gap-4 lg:grid-cols-2 lg:gap-8"},He={class:"relative"},Ye={class:"w-full my-5 overflow-hidden rounded-lg sm:bg-white sm:shadow-lg"},ze=e("thead",{class:"w-full text-black"},[e("tr",{class:"flex flex-col mb-2 bg-gray-100 rounded-l-lg flex-no wrap sm:table-row sm:rounded-none sm:mb-0"},[e("th",{class:"p-3 text-left"},"PATIENTS"),e("th",{class:"p-3 text-left max-sm:hidden"}," COURSE/SCHOOL "),e("th",{class:"p-3 text-left max-sm:hidden"},"SEX"),e("th",{class:"p-3 text-left max-sm:hidden"}," LAST VISIT ")])],-1),Ge={class:"flex-1 sm:flex-none"},Re={class:"p-3 border-grey-light sm:border-b hover:bg-gray-100 max-sm:hidden"},qe={class:"flex flex-col"},Ke={class:"mr-2 text-base font-medium leading-none text-gray-700"},Pe={class:"mr-2 text-base font-normal leading-none text-gray-700"},Xe={class:"p-3 border-grey-light sm:border-b hover:bg-gray-100"},Je={class:"flex flex-col"},Qe={class:"mr-2 text-base font-medium leading-none text-gray-700"},We={class:"mr-2 text-base font-normal leading-none text-gray-700"},Ze={class:"p-3 border-grey-light sm:border-b hover:bg-gray-100 max-sm:hidden"},el={class:"flex flex-col"},ll={class:"mr-2 text-base font-medium leading-none text-gray-700"},tl={class:"mr-2 text-base font-normal leading-none text-gray-700"},sl={class:"p-3 border-grey-light sm:border-b hover:bg-gray-100 max-sm:hidden"},ol={class:"flex flex-col"},al={class:"mr-2 text-base font-medium leading-none text-gray-700"},nl={class:"p-3 border-b border-grey-light hover:bg-gray-100 max-sm:hidden"},rl={class:"flex flex-col"},il={key:0,class:"mr-2 text-base font-medium leading-none text-gray-700"},dl={key:1,class:"mr-2 text-base font-medium leading-none text-gray-700"},cl={key:0,class:"flex justify-center w-full mt-6"},ml={class:"flex flex-col items-center gap-6 px-4 text-lg font-semibold"},fl={class:"text-xl text-center text-green-500 capitalize"},ul={class:"w-56 pb-4 text-sm font-normal text-center text-gray-500"},hl={class:"flex flex-col items-center gap-6 px-4 text-lg font-semibold"},gl={class:"w-56 text-lg font-semibold text-center text-red-500 capitalize"},Bl={__name:"Index",props:{students:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})},schools:{type:Object,default:()=>({})}},setup(p){const N=p,V=h(null),H=()=>{V.value=document.querySelector("#file").files[0]},Y=async()=>{let o=new FormData;o.append("file",V.value);try{const t=await oe.post("/admin/student/bulk",o,{headers:{"Content-Type":"multipart/form-data"}},{preserveScroll:!1,preserveState:!1});console.log("File uploaded successfully"),console.log(t.data),S.value=!1,B()}catch(t){console.log("Error uploading file"),console.error(t)}},C=h(!1);function z(){C.value=!1}function G(){C.value=!0}const S=h(!1);function D(){S.value=!1}function R(){S.value=!0}const b=h(!1);function U(){b.value=!1}const A=J(),I=E(()=>A.props.flash.success,b.value=!0),q=E(()=>A.props.flash.message),L=E(()=>A.props.flash.error,b.value=!0);let u=h(N.filters.search),T=h("id_number"),j=h("asc"),M=h("");const s=Q({all:!0,male:!1,female:!1,schools:{SAMCIS:!1,SAS:!1,SEA:!1,SOL:!1,SOM:!1,SONAHBS:!1,STELA:!1}});let O=null;const B=()=>{ae.get("/admin/student",{search:u.value,sort:T.value,direction:j.value,sex:M.value,school:s.school},{preserveState:!0,replace:!0})},w=()=>{O&&clearTimeout(O),O=setTimeout(()=>{B()},500)},K=()=>{T.value="id_number",j.value="asc"};W(u,()=>{u.value||K(),w()});const P=()=>{M.value="",s.all=!0,s.male=!1,s.female=!1,s.school="",Object.keys(s.schools).forEach(o=>{s.schools[o]=!1}),w()},F=o=>{o==="male"?s.female=!1:o==="female"&&(s.male=!1),s.all=!1,M.value=s[o]?o:"",u.value="",w()},g=o=>{Object.keys(s.schools).forEach(t=>{t!==o&&(s.schools[t]=!1)}),s.all=!1,s.school=s.school===o?"":o,u.value="",w()},X=o=>ue(o,"MM-DD-YYYY").format("DD-MM-YYYY");return(o,t)=>(m(),y(me,null,{mainContent:n(()=>[he,e("div",ge,[e("div",xe,[e("div",pe,[e("div",be,[e("div",ye,[ve,c(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=l=>ee(u)?u.value=l:u=l),type:"text",name:"search",class:"w-full h-10 pl-10 pr-4 text-sm placeholder-gray-500 border border-gray-300 rounded-lg sm:text-base focus:outline-none focus:border-indigo-400 bg-gray-50",placeholder:"Search..."},null,512),[[Z,i(u)]])]),e("div",null,[d(i(fe),{placement:"bottom",text:"Filter"},{default:n(()=>[e("ul",_e,[e("li",Se,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=l=>s.all=l),onChange:t[2]||(t[2]=l=>P())},null,544),[[f,s.all]]),a(" All ")])]),e("li",we,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=l=>s.male=l),onChange:t[4]||(t[4]=l=>F("male"))},null,544),[[f,s.male]]),a(" Male ")])]),e("li",ke,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=l=>s.female=l),onChange:t[6]||(t[6]=l=>F("female"))},null,544),[[f,s.female]]),a(" Female ")])]),e("li",Ce,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=l=>s.schools.SAMCIS=l),onChange:t[8]||(t[8]=l=>g("SAMCIS"))},null,544),[[f,s.schools.SAMCIS]]),a(" SAMCIS ")])]),e("li",Ae,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=l=>s.schools.SAS=l),onChange:t[10]||(t[10]=l=>g("SAS"))},null,544),[[f,s.schools.SAS]]),a(" SAS ")])]),e("li",Me,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=l=>s.schools.SEA=l),onChange:t[12]||(t[12]=l=>g("SEA"))},null,544),[[f,s.schools.SEA]]),a(" SEA ")])]),e("li",Oe,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=l=>s.schools.SOL=l),onChange:t[14]||(t[14]=l=>g("SOL"))},null,544),[[f,s.schools.SOL]]),a(" SOL ")])]),e("li",Ee,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=l=>s.schools.SOM=l),onChange:t[16]||(t[16]=l=>g("SOM"))},null,544),[[f,s.schools.SOM]]),a(" SOM ")])]),e("li",$e,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=l=>s.schools.SONAHBS=l),onChange:t[18]||(t[18]=l=>g("SONAHBS"))},null,544),[[f,s.schools.SONAHBS]]),a(" SONAHBS ")])]),e("li",Ve,[e("label",null,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=l=>s.schools.STELA=l),onChange:t[20]||(t[20]=l=>g("STELA"))},null,544),[[f,s.schools.STELA]]),a(" STELA ")])])])]),_:1})])]),e("div",De,[e("button",{onClick:R,type:"button",class:"px-5 py-3 text-sm font-medium text-center text-white bg-yellow-500 rounded-lg max-sm:w-full hover:bg-yellow-600 focus:ring-4 focus:outline-none focus:ring-yellow-300 dark:bg-yellow-600 dark:hover:bg-yellow-700 dark:focus:ring-yellow-800"}," Import "),S.value?(m(),y(i($),{key:0,onClose:D},{header:n(()=>[Ue]),body:n(()=>[e("form",{class:"",onSubmit:le(Y,["prevent"]),enctype:"multipart/form-data"},[e("div",Le,[Te,e("input",{class:"w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",id:"file",type:"file",onChange:H},null,32)]),e("div",je,[d(i(k),{onClick:D,color:"alternative"},{default:n(()=>[a(" Cancel ")]),_:1}),d(i(k),{type:"submit",color:"green"},{default:n(()=>[a(" Insert ")]),_:1})])],40,Ie)]),_:1})):x("",!0)]),e("div",Be,[e("button",{onClick:G,type:"button",class:"flex items-center gap-3 px-5 py-3 text-sm font-medium text-center text-white bg-green-500 rounded-lg max-sm:w-full hover:bg-green-600"},[d(ne),a(" Add New Student ")])])])]),e("div",Fe,[e("div",Ne,[e("div",He,[e("table",Ye,[ze,e("tbody",Ge,[(m(!0),v(se,null,te(p.students.data,l=>(m(),v("tr",{class:"flex flex-col mb-2 flex-no wrap sm:table-row sm:mb-0 max-sm:border max-sm:roun hover:bg-gray-100",key:l.id},[e("td",Re,[d(i(_),{href:`/admin/student/${l.id}`,class:"flex flex-col"},{default:n(()=>[e("div",qe,[e("p",Ke,r(l.id_number),1),e("p",Pe,r(l.last_name)+", "+r(l.first_name)+" "+r(l.middle_name),1)])]),_:2},1032,["href"])]),d(i(_),{href:`/admin/student/${l.id}`,class:"flex flex-col sm:hidden"},{default:n(()=>[e("td",Xe,[e("div",Je,[e("p",Qe,r(l.id_number),1),e("p",We,r(l.last_name)+", "+r(l.first_name)+", "+r(l.middle_name),1)])])]),_:2},1032,["href"]),e("td",Ze,[d(i(_),{href:`/admin/student/${l.id}`,class:"flex flex-col"},{default:n(()=>[e("div",el,[e("p",ll,r(l.course),1),e("p",tl,r(l.school),1)])]),_:2},1032,["href"])]),e("td",sl,[d(i(_),{href:`/admin/student/${l.id}`,class:"flex flex-col"},{default:n(()=>[e("div",ol,[e("p",al,r(l.sex),1)])]),_:2},1032,["href"])]),e("td",nl,[d(i(_),{href:`/admin/student/${l.id}`,class:"flex flex-col"},{default:n(()=>[e("div",rl,[!l.treatments||!l.treatments.length?(m(),v("p",il," Did not visit yet ")):l.treatments[0].updated_at?(m(),v("p",dl,r(X(new Date(l.treatments[0].date).toLocaleDateString())),1)):x("",!0)])]),_:2},1032,["href"])])]))),128))])])])]),p.students.data.length?(m(),v("div",cl,[d(ie,{links:p.students.links},null,8,["links"])])):x("",!0)]),C.value?(m(),y(ce,{key:0,onClose:z,schools:p.schools},null,8,["schools"])):x("",!0)]),I.value&&b.value?(m(),y(i($),{key:0,persistent:"",size:"lg"},{body:n(()=>[e("div",ml,[e("h1",fl,r(I.value),1),d(de,{class:"w-20 h-20"}),e("h2",ul,r(q.value),1),d(i(k),{color:"default",size:"lg",class:"w-full",onClick:U},{default:n(()=>[a("Got It")]),_:1})])]),_:1})):x("",!0),L.value&&b.value?(m(),y(i($),{key:1,size:"md",persistent:""},{body:n(()=>[e("div",hl,[d(re,{class:"w-12 h-12"}),e("h1",gl,r(L.value),1),d(i(k),{color:"default",size:"lg",class:"w-full",onClick:U},{default:n(()=>[a("Got It")]),_:1})])]),_:1})):x("",!0)]),_:1}))}};export{Bl as default};
