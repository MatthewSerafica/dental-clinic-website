import{K as B,r as _,i as I,T as P,j,k as g,o as r,a as p,e as O,w as h,u as o,l as z,b as e,m as c,v as f,n as $,F as y,g as x,t as u,d as k,p as T,q as V}from"./app-b4ce430c.js";import{s as F}from"./flowbite-vue-bbcb8c87.js";import{h as H}from"./index-6d8cf40a.js";const q=["onSubmit"],J=e("div",{class:"flex items-center text-lg"}," Book an Appointment ",-1),K={class:"p-4"},L={class:"grid grid-cols-2 gap-4"},R={class:"mb-4"},G=e("label",{for:"patientId",class:"block font-semibold"},"ID Number",-1),Q={class:"mb-4"},W=e("label",{for:"patientName",class:"block font-semibold"},"Patient Name",-1),X={class:"mb-4"},Y=e("label",{for:"appointmentDate",class:"block font-semibold"},"Appointment Date",-1),Z={class:"mb-4"},ee=e("label",{for:"dentist",class:"block font-semibold"},"Dentist",-1),te=e("option",{disabled:"",value:""}," Please select a dentist ",-1),se=["value"],oe={key:0,class:"text-red-600"},ne={class:"mb-4"},ae=e("label",{for:"appointmentType",class:"block font-semibold"},"Appointment Type",-1),le=e("option",{value:"",disabled:"",selected:""}," Please select one ",-1),de=e("option",null,"Consultation",-1),ie=e("option",null,"Extraction",-1),re=e("option",null,"Internship/OJT",-1),pe=e("option",null,"Annual",-1),me=e("option",null,"Varsity/Intrams",-1),ce=e("option",null,"Emergency Cases",-1),ue=e("option",null,"Excuses Slip",-1),_e=e("option",null,"Employment",-1),be=e("option",null,"Others",-1),fe=[le,de,ie,re,pe,me,ce,ue,_e,be],ve={key:0,class:"text-red-600"},ge={class:"mb-4"},he=e("label",{for:"appointmentDescription",class:"block font-semibold"},"Appointment Description",-1),ye={key:0,class:"text-red-600"},xe={class:"mb-4"},ke=e("label",{class:"block font-semibold"},"Morning Session",-1),we={class:"grid grid-cols-6 gap-4"},De=["disabled","onClick"],Se=e("label",{class:"block font-semibold"},"Afternoon Session",-1),Me={class:"grid grid-cols-6 gap-4"},Ce=["disabled","onClick"],$e={class:"mb-4"},Te=e("button",{type:"submit",as:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 mr-3 mb-3"}," Book ",-1),Ee={__name:"Create",props:{dentists:{type:Array},students:{type:Object,default:()=>({})},employees:{type:Object,default:()=>({})}},setup(A,{emit:N}){B();const w=_([]);let l=_(null);const D=()=>{N("close")};function S(a){const s=Math.floor(a),t=Math.floor((a-s)*60),v=Math.round((a-s-t/60)*3600),C=H().hours(s).minutes(t).seconds(v).format("HH:mm:ss");return n.app_time=C,C}const m=_(""),d=_({last_name:"",first_name:"",middle_name:""}),i=_({last_name:"",first_name:"",middle_name:""}),b=_(""),E=async()=>{if(m.value.length===7)try{if(m.value.includes(" ")){const s=(await g.get(`appointment/employee/${m.value}`)).data;i.value.last_name=s.last_name,i.value.first_name=s.first_name,i.value.middle_name=s.middle_name,b.value=i.value.last_name+", "+i.value.first_name+", "+i.value.middle_name,n.name=i.value.last_name+", "+i.value.first_name}else{const s=(await g.get(`appointment/student/${m.value}`)).data;d.value.last_name=s.last_name,d.value.first_name=s.first_name,d.value.middle_name=s.middle_name,b.value=d.value.last_name+", "+d.value.first_name+", "+d.value.middle_name,n.name=d.value.last_name+", "+d.value.first_name}}catch(a){console.error(a)}else b.value=""};I(m,()=>{E()});const n=P({name:null,dentist_id:null,app_date:null,app_time:null,app_type:null,pat_notes:null});j(async()=>{try{const a=await g.get("/api/booked-times");w.value=a.data}catch(a){console.error(a)}});const M=a=>{const s=`${Math.floor(a)}:${String(a%1*60).padStart(2,"0")}`;return w.value.includes(s)},U=()=>n.post(route("appointment.store"),{preserveScroll:!1,preserveState:!1});return(a,s)=>(r(),p("form",{onSubmit:z(U,["prevent"])},[O(o(F),{size:"5xl",onClose:D},{header:h(()=>[J]),body:h(()=>[e("div",K,[e("div",L,[e("div",null,[e("div",R,[G,c(e("input",{id:"patientId","onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),type:"text",class:"w-[25rem] px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Enter ID Number"},null,512),[[f,m.value]])]),e("div",Q,[W,c(e("input",{id:"patientName",type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>b.value=t),class:"w-[25rem] px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Patient Name",disabled:""},null,512),[[f,b.value]])]),e("div",X,[Y,c(e("input",{id:"appointmentDate","onUpdate:modelValue":s[2]||(s[2]=t=>o(n).app_date=t),type:"date",class:"w-[25rem] px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Select Appointment Date"},null,512),[[f,o(n).app_date]])]),e("div",Z,[ee,c(e("select",{id:"dentist","onUpdate:modelValue":s[3]||(s[3]=t=>o(n).dentist_id=t),class:"w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},[te,(r(!0),p(y,null,x(A.dentists,t=>(r(),p("option",{value:t.dentist_id}," Dr. "+u(t.first_name)+" "+u(t.last_name),9,se))),256))],512),[[$,o(n).dentist_id,void 0,{number:!0}]]),o(n).errors.dentist_id?(r(),p("div",oe,u(o(n).errors.dentist_id),1)):k("",!0)]),e("div",ne,[ae,c(e("select",{id:"appointmentType","onUpdate:modelValue":s[4]||(s[4]=t=>o(n).app_type=t),class:"w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},fe,512),[[$,o(n).app_type]]),o(n).errors.app_type?(r(),p("div",ve,u(o(n).errors.app_type),1)):k("",!0)]),e("div",ge,[he,c(e("textarea",{id:"appointmentDescription",class:"w-[25rem] px-3 py-2 rounded-md drop-shadow-lg","onUpdate:modelValue":s[5]||(s[5]=t=>o(n).pat_notes=t),placeholder:"Enter Appointment Description"},null,512),[[f,o(n).pat_notes]]),o(n).errors.pat_notes?(r(),p("div",ye,u(o(n).errors.pat_notes),1)):k("",!0)])]),e("div",xe,[ke,e("div",we,[(r(),p(y,null,x([8,8.25,8.5,8.75,9,9.25,9.5,9.75,10,10.25,10.5,10.75,11],t=>e("button",{type:"button",key:`morning-${t}`,disabled:M(t),onClick:v=>{T(l)?l.value=t:l=t,o(n).app_time=S(t)},class:V({"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700":o(l)!==t,"px-4 py-2 font-bold text-white bg-green-500 rounded hover:bg-green-700":o(l)===t})},u(`${Math.floor(t)}:${String(t%1*60).padStart(2,"0")} AM`),11,De)),64))]),Se,e("div",Me,[(r(),p(y,null,x([13,13.25,13.5,13.75,14,14.25,14.5,14.75,15,15.25,15.5,15.75,16],t=>e("button",{type:"button",key:`afternoon-${t}`,disabled:M(t),onClick:v=>{T(l)?l.value=t:l=t,o(n).app_time=S(t)},class:V({"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700":o(l)!==t,"px-4 py-2 font-bold text-white bg-green-500 rounded hover:bg-green-700":o(l)===t})},u(`${Math.floor(t-12)}:${String(t%1*60).padStart(2,"0")} PM`),11,Ce)),64))])]),e("div",$e,[c(e("input",{type:"hidden","onUpdate:modelValue":s[6]||(s[6]=t=>o(n).app_time=t)},null,512),[[f,o(n).app_time]])])])])]),footer:h(()=>[e("div",{class:"flex justify-center"},[e("button",{onClick:D,type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600 mr-3 mb-3"}," Cancel "),Te])]),_:1})],40,q))}};export{Ee as default};
