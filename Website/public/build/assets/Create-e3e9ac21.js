import{r as m,n as T,T as z,p as F,i,f as B,w as b,u as a,e as O,o as n,d as e,m as v,v as x,q as M,F as k,j as w,t as u,h as f,b as A,l as y}from"./app-cdbf4484.js";import{m as N,s as q}from"./flowbite-vue-62d8acb5.js";import{h as U}from"./index-89e1533b.js";const L=["onSubmit"],G=e("div",{class:"items-center px-4"},[e("h1",{class:"text-xl font-semibold text-gray-800"}," Book An Appointment ")],-1),J={class:"p-2"},K={class:"flex flex-row gap-12 max-md:flex-col"},Q={class:"w-[25rem]"},W={class:"w-[25rem] mb-4"},X=e("label",{for:"patientId",class:"block font-semibold"},"ID Number",-1),Z={class:"w-[25rem] mb-4"},ee=e("label",{for:"patientName",class:"block font-semibold"},"Patient Name",-1),te={class:"mb-4 w-[25rem]"},se=e("label",{for:"dentist",class:"block font-semibold"},"Dentist",-1),oe=e("option",{disabled:"",value:""}," Please select a dentist ",-1),ae=["value"],ne={key:0,class:"text-red-600"},le={class:"w-[25rem] mb-4"},ie=e("label",{for:"appointmentDate",class:"block font-semibold"},"Appointment Date",-1),re=["value","onClick"],de={class:"mb-4 w-[25rem]"},me=e("label",{for:"appointmentType",class:"block font-semibold"},"Appointment Type",-1),ue=e("option",{value:"",disabled:"",selected:""}," Please select one ",-1),ce=["value"],pe={key:0,class:"text-red-600"},_e={class:"mb-4 w-[25rem]"},be=e("label",{for:"appointmentDescription",class:"block font-semibold"},"Appointment Description",-1),ve={key:0,class:"text-red-600"},fe={class:""},ye={key:0,class:"mb-2 text-lg font-semibold text-center"},ge={class:"grid grid-cols-5 gap-4 mb-4"},he={class:"text-base"},xe={key:1,class:"mb-2 text-lg font-semibold text-center"},ke={class:"grid grid-cols-5 gap-4"},we={class:"text-base"},De={class:"text-base"},Ce={class:"mb-4"},Ve=e("button",{type:"submit",as:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 mr-3 mb-3"}," Book ",-1),Te={__name:"Create",props:{dentists:{type:Array},students:{type:Object,default:()=>({})},employees:{type:Object,default:()=>({})}},setup(P,{emit:R}){m(null);const S=()=>{R("close")},Y=m({modelValue:"YYYY-MM-DD"}),$=m([{repeat:{weekdays:[1]}}]),p=m(""),r=m({last_name:"",first_name:"",middle_name:""}),d=m({last_name:"",first_name:"",middle_name:""}),_=m("");let g=m({});const j=async()=>{if(p.value.length===7)try{if(p.value.includes(" ")){const s=(await y.get(`/assistant/appointment/employee/${p.value}`)).data;d.value.last_name=s.last_name,d.value.first_name=s.first_name,d.value.middle_name=s.middle_name,d.value.middle_name===null?_.value=d.value.last_name+", "+d.value.first_name:_.value=d.value.last_name+", "+d.value.first_name+", "+d.value.middle_name,o.name=d.value.last_name+", "+d.value.first_name,g=(await y.get(route("assistant.getemployeeservice"))).data}else{const s=(await y.get(`/assistant/appointment/student/${p.value}`)).data;r.value.last_name=s.last_name,r.value.first_name=s.first_name,r.value.middle_name=s.middle_name,r.value.course=s.course,r.value.year=s.year,!r.value.middle_name===null?_.value=r.value.last_name+", "+r.value.first_name+", "+r.value.middle_name:_.value=r.value.last_name+", "+r.value.first_name,o.name=r.value.last_name+", "+r.value.first_name,(s.course=="Doctor of Medicine"||s.course=="BSN")&&s.year!="1st Year"?g=(await y.get(route("assistant.getannualservices"))).data:g=(await y.get(route("assistant.getregularservices"))).data}}catch(l){console.error(l)}else _.value=""};T(p,()=>{j()});const D=m({}),H=async(l,s)=>{try{const c=await y.get(route("assistant.appointment.getAvailableTime",{id:l,date:s}));D.value=c.data}catch(c){console.error(c)}},o=z({name:null,dentist_id:null,app_date:null,app_time:null,app_type:null,pat_notes:null,time_id:null});T(()=>({dentist_id:o.dentist_id,app_date:o.app_date}),({dentist_id:l,app_date:s})=>{l&&s&&H(l,s)});const C=(l,s)=>{o.app_time=I(l),o.time_id=s};function I(l){return U(l,"hh:mm A").format("HH:mm:ss")}function V(l){return U(l,"HH:mm").format("hh:mm A")}const E=()=>o.post(route("assistant.appointment.store"),{preserveScroll:!1,preserveState:!1});return(l,s)=>{const c=F("VDatePicker");return n(),i("form",{onSubmit:O(E,["prevent"])},[B(a(q),{size:"6xl",onClose:S},{header:b(()=>[G]),body:b(()=>[e("div",J,[e("div",K,[e("div",Q,[e("div",W,[X,v(e("input",{id:"patientId","onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),type:"text",class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Enter ID Number"},null,512),[[x,p.value]])]),e("div",Z,[ee,v(e("input",{id:"patientName",type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>_.value=t),class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Patient Name",disabled:""},null,512),[[x,_.value]])]),e("div",te,[se,v(e("select",{id:"dentist","onUpdate:modelValue":s[2]||(s[2]=t=>a(o).dentist_id=t),class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},[oe,(n(!0),i(k,null,w(P.dentists,t=>(n(),i("option",{value:t.dentist_id}," Dr. "+u(t.first_name)+" "+u(t.last_name),9,ae))),256))],512),[[M,a(o).dentist_id,void 0,{number:!0}]]),a(o).errors.dentist_id?(n(),i("div",ne,u(a(o).errors.dentist_id),1)):f("",!0)]),e("div",le,[ie,B(c,{id:"appointmentDate",modelValue:a(o).app_date,"onUpdate:modelValue":s[3]||(s[3]=t=>a(o).app_date=t),modelModifiers:{string:!0},"input-debounce":500,"disabled-dates":$.value,"min-date":new Date,"max-date":new Date().setDate(new Date().getDate()+6),masks:Y.value},{default:b(({togglePopover:t,inputValue:h})=>[e("input",{value:h,class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Select Appointment Date",onClick:t},null,8,re)]),_:1},8,["modelValue","disabled-dates","min-date","max-date","masks"])]),e("div",de,[me,v(e("select",{id:"appointmentType","onUpdate:modelValue":s[4]||(s[4]=t=>a(o).app_type=t),class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},[ue,(n(!0),i(k,null,w(a(g),t=>(n(),i("option",{value:t.services},u(t.services),9,ce))),256))],512),[[M,a(o).app_type]]),a(o).errors.app_type?(n(),i("div",pe,u(a(o).errors.app_type),1)):f("",!0)]),e("div",_e,[be,v(e("textarea",{id:"appointmentDescription",class:"w-full px-3 py-2 rounded-md drop-shadow-lg","onUpdate:modelValue":s[5]||(s[5]=t=>a(o).pat_notes=t),placeholder:"Enter Appointment Description"},null,512),[[x,a(o).pat_notes]]),a(o).errors.pat_notes?(n(),i("div",ve,u(a(o).errors.pat_notes),1)):f("",!0)])]),e("div",fe,[a(o).dentist_id?(n(),i("h2",ye,"Morning Session")):f("",!0),e("div",ge,[(n(!0),i(k,null,w(D.value.morning,t=>(n(),i("div",null,[t.isBooked?f("",!0):(n(),A(a(N),{key:0,onClick:h=>C(t.time,t.times_id),type:"button",as:"button",class:"px-4 py-4 border-2 focus:bg-blue-800 focus:border-blue-800 focus:ring-blue-800 focus:text-white active:bg-blue-800 active:border-blue-800 active:ring-blue-800",outline:""},{default:b(()=>[e("p",he,u(V(t.time)),1)]),_:2},1032,["onClick"]))]))),256))]),a(o).dentist_id?(n(),i("h2",xe,"Afternoon Session")):f("",!0),e("div",ke,[(n(!0),i(k,null,w(D.value.afternoon,t=>(n(),i("div",null,[t.isBooked?(n(),A(a(N),{key:1,onClick:h=>C(t.time,t.times_id),type:"button",as:"button",class:"px-4 py-4 border-2 border-red-600",color:"red",disabled:""},{default:b(()=>[e("p",De,u(V(t.time)),1)]),_:2},1032,["onClick"])):(n(),A(a(N),{key:0,onClick:h=>C(t.time,t.times_id),type:"button",as:"button",class:"px-4 py-4 border-2",outline:""},{default:b(()=>[e("p",we,u(V(t.time)),1)]),_:2},1032,["onClick"]))]))),256))])])]),e("div",Ce,[v(e("input",{type:"hidden","onUpdate:modelValue":s[6]||(s[6]=t=>a(o).app_time=t)},null,512),[[x,a(o).app_time]])])])]),footer:b(()=>[e("div",{class:"flex justify-center"},[e("button",{onClick:S,type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600 mr-3 mb-3"}," Cancel "),Ve])]),_:1})],40,L)}}};export{Te as default};
