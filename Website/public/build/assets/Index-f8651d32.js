import{o as a,a as r,B as q,r as u,j as J,k as K,T as E,h as A,w as h,b as e,t as d,d as i,e as B,f as Q,g as C,u as s,x as W,l as I,F as S,m,v as f,n as P,p as U,q as H}from"./app-b4ce430c.js";import{a as X}from"./AddApointment-0071f76b.js";import Y from"./MainLayout-6cdefecb.js";import{s as Z}from"./flowbite-vue-bbcb8c87.js";import{h as j}from"./index-6d8cf40a.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import"./SideBar-a0ceb092.js";import"./SluDentalLogo-fe187267.js";import"./DentistLinks-7d5fe479.js";import"./SideBarLinks-64ab4153.js";import"./DashboardIcon-8610b4cf.js";import"./UsersIcon-eed6ce0f.js";import"./PatientLinks-5b541d90.js";import"./Header-afb0ca39.js";const te={},se={fill:"#f24a4a",height:"17px",width:"22px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 311.539 311.539","xml:space":"preserve",stroke:"#d10000"},oe=q('<g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><g><polygon points="190.127,93.127 155.77,127.484 121.412,93.127 93.127,121.412 127.485,155.77 93.127,190.127 121.412,218.412 155.77,184.055 190.127,218.412 218.412,190.127 184.055,155.77 218.412,121.412 "></polygon> <path d="M155.77,0C69.74,0,0,69.74,0,155.77s69.74,155.77,155.77,155.77s155.77-69.74,155.77-155.77S241.799,0,155.77,0z M155.77,271.539C91.784,271.539,40,219.761,40,155.77C40,91.784,91.778,40,155.77,40c63.986,0,115.77,51.778,115.77,115.77 C271.539,219.755,219.761,271.539,155.77,271.539z"></path></g></g>',3),ne=[oe];function le(g,p){return a(),r("svg",se,ne)}const ae=ee(te,[["render",le]]),re={class:"flex flex-col"},de={class:"absolute rounded top-16 left-64"},ie=e("div",{class:"relative flex flex-col top-4 left-16"},[e("h1",{class:"w-20 h-8 text-xl font-medium"}," APPOINTMENTS "),e("h6",{class:"h-1 text-xs text-gray-400"}," Home > Appointment List ")],-1),pe={class:"relative laptop:w-[75rem] laptop:h-[36rem] left-10 desktop:top-16 laptop:top-10 desktop:w-[99rem]"},ce={class:"w-full desktop:h-[42rem] laptop:h-[39rem] bg-white rounded-xl drop-shadow-lg"},ue={key:0,"x-data":"{shown: false, timeout:null}","x-init":"clearTimeout(timeout); shown = true; timeout = setTimeout(() => { shown = false }, 2000);","x-show.transition.opacity.out.duration.2000ms":"shown",class:"absolute top-2 p-2 mb-4 bg-green-200 border border-green-200 rounded-md shadow-sm left-[42rem] w-56 dark:border-green-800 dark:bg-green-900 text-center"},me={key:1,"x-data":"{shown: false, timeout:null}","x-init":"clearTimeout(timeout); shown = true; timeout = setTimeout(() => { shown = false }, 2000);","x-show.transition.opacity.out.duration.2000ms":"shown",class:"absolute top-2 p-2 mb-4 bg-red-400 border border-red-200 rounded-md shadow-sm left-[42rem] w-56 dark:border-red-800 dark:bg-red-900 text-center text-white"},_e={class:"relative px-5 py-6"},be=e("div",{class:"relative text-lg font-semibold left-6"},"List of Appointments",-1),he={class:"relative w-full top-4"},fe=e("div",{class:"absolute flex items-center justify-between gap-3 left-6"},[e("button",{class:"px-4 py-2 font-semibold text-blue-700 bg-transparent border border-blue-500 rounded hover:bg-blue-500 hover:text-white hover:border-transparent"}," All "),e("button",{class:"px-4 py-2 font-semibold text-blue-700 bg-transparent border border-blue-500 rounded hover:bg-blue-500 hover:text-white hover:border-transparent"}," Upcoming "),e("button",{class:"px-4 py-2 font-semibold text-blue-700 bg-transparent border border-blue-500 rounded hover:bg-blue-500 hover:text-white hover:border-transparent"}," Past ")],-1),ge={class:"absolute right-10"},ve={class:"relative desktop:top-20"},xe={class:"w-[96rem] text-sm text-left text-gray-500 rounded"},ye=e("thead",{class:"text-xs text-left text-gray-400 bg-gray-50"},[e("tr",null,[e("th",{class:"p-6"},"Status"),e("th",{class:"p-6"},"Date"),e("th",{class:"p-6"},"Time"),e("th",{class:"p-6"},"Type"),e("th",{class:"p-6"},"Notes"),e("th",{class:""})])],-1),we={class:"px-6 py-4"},ke={key:0,class:"w-1/2 py-1 text-center text-red-500 bg-red-200 rounded-full"},Ce={key:1,class:"w-1/2 py-1 text-center text-blue-500 bg-blue-200 rounded-full"},Se={key:2,class:"w-1/2 py-1 text-center text-orange-400 bg-orange-200 rounded-full"},Te={key:3,class:"w-1/2 py-1 text-center text-green-500 bg-green-200 rounded-full"},Ae={key:4,class:"w-1/2 py-1 text-center text-yellow-400 bg-yellow-100 rounded-full"},De={class:"px-6 py-4"},Me={class:"px-6 py-4"},$e={class:"px-6 py-4"},Ne={class:"px-6 py-4"},Ve={class:"py-4"},Ee=["onClick"],Be=e("span",null,"Cancel",-1),Ie=["onSubmit"],Pe=e("div",{class:"flex items-center text-lg"}," Book an Appointment ",-1),Ue={class:"p-4"},He={class:"grid grid-cols-2 gap-4"},je={class:"mb-4"},ze=e("label",{for:"patientId",class:"block font-semibold"},"ID Number",-1),Oe={class:"mb-4"},Le=e("label",{for:"patientName",class:"block font-semibold"},"Patient Name",-1),Re={class:"mb-4"},Ge=e("label",{for:"appointmentDate",class:"block font-semibold"},"Appointment Date",-1),Fe={class:"mb-4"},qe=e("label",{for:"dentist",class:"block font-semibold"},"Dentist",-1),Je=e("option",{disabled:"",value:""}," Please select a dentist ",-1),Ke=["value"],Qe={key:0,class:"text-red-600"},We={class:"mb-4"},Xe=e("label",{for:"appointmentType",class:"block font-semibold"},"Appointment Type",-1),Ye=e("option",{value:"",disabled:"",selected:""}," Select Appointment Type ",-1),Ze=e("option",null,"Consultation",-1),et=e("option",null,"Extraction",-1),tt=e("option",null,"Internship/OJT",-1),st=e("option",null,"Annual",-1),ot=e("option",null,"Varsity/Intrams",-1),nt=e("option",null,"Emergency Cases",-1),lt=e("option",null,"Excuses Slip",-1),at=e("option",null,"Employment",-1),rt=e("option",null,"Others",-1),dt=[Ye,Ze,et,tt,st,ot,nt,lt,at,rt],it={key:0,class:"text-red-600"},pt={class:"mb-4"},ct=e("label",{for:"appointmentDescription",class:"block font-semibold"},"Appointment Description",-1),ut={key:0,class:"text-red-600"},mt={class:"mb-4"},_t=e("label",{class:"block font-semibold"},"Morning Session",-1),bt={class:"grid grid-cols-6 gap-4"},ht=["disabled","onClick"],ft=e("label",{class:"block font-semibold"},"Afternoon Session",-1),gt={class:"grid grid-cols-6 gap-4"},vt=["disabled","onClick"],xt=e("button",{type:"submit",as:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 mr-3 mb-3"}," Book ",-1),It={__name:"Index",props:{dentists:{type:Array},user:{type:Object},appointments:{type:Array}},setup(g){const p=g;let c=u(null);const D=u([]);function M(l){const n=Math.floor(l),t=Math.floor((l-n)*60),k=Math.round((l-n-t/60)*3600),V=j().hours(n).minutes(t).seconds(k).format("HH:mm:ss");return o.app_time=V,V}function z(l){return j(l,"HH:mm").format("hh:mm A")}const O=l=>{const n={year:"numeric",month:"long",day:"numeric"};return new Date(l).toLocaleDateString(void 0,n)},v=u(""),_=u(""),b=u(""),x=u(""),y=u(""),w=u("");J(async()=>{p.user.user_type==="student"?(v.value=p.user.student.id_number,_.value=p.user.student.last_name+", ",b.value=p.user.student.first_name,x.value=p.user.student.middle_name,y.value=_.value+b.value+", "+x.value,w.value=_.value+b.value,o.name=w.value):(v.value=p.user.employee.id_number,_.value=p.user.employee.last_name+", ",b.value=p.user.employee.first_name,x.value=p.user.employee.middle_name,y.value=_.value+b.value+", "+x.value,w.value=_.value+b.value,o.name=w.value);try{const l=await K.get("/api/booked-times");D.value=l.data}catch(l){console.error(l)}});const $=l=>{const n=`${Math.floor(l)}:${String(l%1*60).padStart(2,"0")}`;return D.value.includes(n)},T=u(!1);function N(){T.value=!1}function L(){T.value=!0}const R=E({status:"cancelled",made_appointment:0});function G(l){R.put(route("patientside.appointments.update",l.app_id))}const o=E({name:null,dentist_id:null,app_date:null,app_time:null,app_type:null,pat_notes:null}),F=()=>o.post(route("patientside.appointments.store"),{preserveScroll:!1,preserveState:!1});return(l,n)=>(a(),A(Y,null,{mainContent:h(()=>[e("div",re,[e("div",de,[ie,e("div",pe,[e("div",ce,[l.flashSuccess?(a(),r("div",ue,d(l.flashSuccess),1)):i("",!0),l.flashError?(a(),r("div",me,d(l.flashError),1)):i("",!0),e("div",_e,[be,e("div",he,[fe,e("div",ge,[e("div",null,[e("button",{onClick:L,type:"button",class:"flex items-center gap-3 px-5 py-2 font-medium text-white bg-green-500 rounded hover:bg-green-700"},[B(X),Q(" Book Appointment ")])])])]),e("div",ve,[e("table",xe,[ye,e("tbody",null,[(a(!0),r(S,null,C(g.appointments,t=>(a(),A(s(W),{href:`/patientside/appointments/${t.app_id}`,class:"table-row bg-white border-b",key:t.app_id},{default:h(()=>[e("th",we,[t.status==="cancelled"?(a(),r("div",ke,"Cancelled")):i("",!0),t.status==="approved"?(a(),r("div",Ce,"Approved")):i("",!0),t.status==="pending"?(a(),r("div",Se,"Pending")):i("",!0),t.status==="completed"?(a(),r("div",Te,"Completed")):i("",!0),t.status==="ongoing"?(a(),r("div",Ae,"Ongoing")):i("",!0)]),e("th",De,d(O(t.app_date)),1),e("th",Me,d(z(t.app_time)),1),e("th",$e,d(t.app_type),1),e("th",Ne,d(t.pat_notes),1),e("th",Ve,[t.status==="approved"||t.status==="pending"?(a(),r("button",{key:0,type:"button",onClick:I(k=>G(t),["prevent"]),class:"flex items-center space-x-1 text-[#f24a4a] text-sm w-24 py-2 bg-red-200 hover:bg-red-300 rounded-xl"},[B(ae,{class:"px-1 ml-2"}),Be],8,Ee)):i("",!0)])]),_:2},1032,["href"]))),128))])])])])])])]),e("form",{class:"flex items-center space-x-4",onSubmit:I(F,["prevent"])},[T.value?(a(),A(s(Z),{key:0,size:"7xl",onClose:N},{header:h(()=>[Pe]),body:h(()=>[e("div",Ue,[e("div",He,[e("div",null,[e("div",je,[ze,m(e("input",{id:"patientId","onUpdate:modelValue":n[0]||(n[0]=t=>v.value=t),type:"text",class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Enter ID Number",disabled:""},null,512),[[f,v.value]])]),e("div",Oe,[Le,m(e("input",{id:"patientName","onUpdate:modelValue":n[1]||(n[1]=t=>y.value=t),type:"text",class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Enter Patient Name",disabled:""},null,512),[[f,y.value]])]),e("div",Re,[Ge,m(e("input",{id:"appointmentDate","onUpdate:modelValue":n[2]||(n[2]=t=>s(o).app_date=t),type:"date",class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Select Appointment Date"},null,512),[[f,s(o).app_date]])]),e("div",Fe,[qe,m(e("select",{id:"dentist","onUpdate:modelValue":n[3]||(n[3]=t=>s(o).dentist_id=t),class:"w-full px-3 py-2 rounded-md drop-shadow-lg"},[Je,(a(!0),r(S,null,C(g.dentists,t=>(a(),r("option",{value:t.dentist_id}," Dr. "+d(t.first_name)+" "+d(t.last_name),9,Ke))),256))],512),[[P,s(o).dentist_id,void 0,{number:!0}]]),s(o).errors.dentist_id?(a(),r("div",Qe,d(s(o).errors.dentist_id),1)):i("",!0)]),e("div",We,[Xe,m(e("select",{id:"appointmentType","onUpdate:modelValue":n[4]||(n[4]=t=>s(o).app_type=t),class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Select Appointment Type"},dt,512),[[P,s(o).app_type]]),s(o).errors.app_type?(a(),r("div",it,d(s(o).errors.app_type),1)):i("",!0)]),e("div",pt,[ct,m(e("textarea",{id:"appointmentDescription",class:"w-[25rem] px-3 py-2 rounded-md drop-shadow-lg","onUpdate:modelValue":n[5]||(n[5]=t=>s(o).pat_notes=t),placeholder:"Enter Appointment Description"},null,512),[[f,s(o).pat_notes]]),s(o).errors.pat_notes?(a(),r("div",ut,d(s(o).errors.pat_notes),1)):i("",!0)])]),e("div",mt,[_t,e("div",bt,[(a(),r(S,null,C([8,8.25,8.5,8.75,9,9.25,9.5,9.75,10,10.25,10.5,10.75,11],t=>e("button",{type:"button",key:`morning-${t}`,disabled:$(t),onClick:k=>{U(c)?c.value=t:c=t,s(o).app_time=M(t)},class:H({"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700":s(c)!==t,"px-4 py-2 font-bold text-white bg-green-500 rounded hover:bg-green-700":s(c)===t})},d(`${Math.floor(t)}:${String(t%1*60).padStart(2,"0")} AM`),11,ht)),64))]),ft,e("div",gt,[(a(),r(S,null,C([13,13.25,13.5,13.75,14,14.25,14.5,14.75,15,15.25,15.5,15.75,16],t=>e("button",{type:"button",key:`afternoon-${t}`,disabled:$(t),onClick:k=>{U(c)?c.value=t:c=t,s(o).app_time=M(t)},class:H({"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700":s(c)!==t,"px-4 py-2 font-bold text-white bg-green-500 rounded hover:bg-green-700":s(c)===t})},d(`${Math.floor(t-12)}:${String(t%1*60).padStart(2,"0")} PM`),11,vt)),64))]),m(e("input",{type:"hidden","onUpdate:modelValue":n[6]||(n[6]=t=>s(o).app_time=t)},null,512),[[f,s(o).app_time]])])])])]),footer:h(()=>[e("div",{class:"flex justify-center"},[e("button",{onClick:N,type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600 mr-3 mb-3"}," Cancel "),xt])]),_:1})):i("",!0)],40,Ie)])]),_:1}))}};export{It as default};
