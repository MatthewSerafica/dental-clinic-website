import{r as i,s as F,l as C,T as q,n as L,p as O,i as r,f as R,w as c,u as o,e as G,o as a,d as t,m as y,v as T,q as U,F as A,j as V,t as u,h as g,b as N}from"./app-cdbf4484.js";import{m as M,s as J}from"./flowbite-vue-62d8acb5.js";import{h as Y}from"./index-89e1533b.js";const K=["onSubmit"],Q=t("div",{class:"items-center px-4"},[t("h1",{class:"text-xl font-semibold text-gray-800"}," Book An Appointment ")],-1),W={class:"p-2"},X={class:"flex flex-row gap-12 max-md:flex-col"},Z={class:"w-[25rem]"},ee={class:"w-[25rem] mb-4"},te=t("label",{for:"patientId",class:"block font-semibold"},"ID Number",-1),se={class:"w-[25rem] mb-4"},oe=t("label",{for:"patientName",class:"block font-semibold"},"Patient Name",-1),ne={class:"mb-4 w-[25rem]"},ae=t("label",{for:"dentist",class:"block font-semibold"},"Dentist",-1),le=t("option",{disabled:"",value:""}," Please select a dentist ",-1),re=["value"],de={key:0,class:"text-red-600"},ie={class:"mb-4 w-[25rem]"},ue=t("label",{for:"appointmentType",class:"block font-semibold"},"Appointment Type",-1),ce=t("option",{value:"",disabled:"",selected:""}," Please select one ",-1),pe=["value"],me={key:0,class:"text-red-600"},_e={class:"w-[25rem] mb-4"},be=t("label",{for:"appointmentDate",class:"block font-semibold"},"Appointment Date",-1),ve=["value","onClick"],fe={class:"mb-4 w-[25rem]"},ye=t("label",{for:"appointmentDescription",class:"block font-semibold"},"Appointment Description",-1),ge={key:0,class:"text-red-600"},he={class:""},ke={key:0,class:"mb-2 text-lg font-semibold text-center"},xe={class:"grid grid-cols-5 gap-4 mb-4"},we={class:"text-base"},De={class:"text-base"},Ce={key:1,class:"mb-2 text-lg font-semibold text-center"},Ae={class:"grid grid-cols-5 gap-4"},Ve={class:"text-base"},Ne={class:"text-base"},Me=t("button",{type:"submit",as:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 mr-3 mb-3"}," Book ",-1),Pe={__name:"Create",props:{dentists:{type:Array},user:{type:Object},appointments:{type:Array}},setup(B,{emit:H}){const d=B,P=()=>{H("close")};i(null);const h=i(""),p=i(""),m=i(""),_=i(""),b=i(""),k=i("");let x=i({});F(async()=>{d.user.user_type==="student"?(h.value=d.user.student.id_number,p.value=d.user.student.last_name+", ",m.value=d.user.student.first_name,_.value=d.user.student.middle_name,!_.value===null?b.value=p.value+m.value+", "+_.value:b.value=p.value+m.value,k.value=p.value+m.value,s.name=k.value,(d.user.student.course=="Doctor of Medicine"||d.user.student.course=="BSN")&&d.user.student.year!="1st Year"?x=(await C.get(route("patient.getannualservices"))).data:x=(await C.get(route("patient.getregularservices"))).data):(h.value=d.user.employee.id_number,p.value=d.user.employee.last_name+", ",m.value=d.user.employee.first_name,_.value=d.user.employee.middle_name,b.value=p.value+m.value+", "+_.value,k.value=p.value+m.value,s.name=k.value,x=(await C.get(route("patient.getemployeeservice"))).data)});const I=i([{repeat:{weekdays:[1]}}]),$=i({modelValue:"YYYY-MM-DD"}),S=i({}),j=async(l,n)=>{try{const v=await C.get(route("patient.appointments.getAvailableTime",{id:l,date:n}));S.value=v.data}catch(v){console.error(v)}},s=q({name:null,dentist_id:null,app_date:null,app_time:null,app_type:null,pat_notes:null,time_id:null});L(()=>({dentist_id:s.dentist_id,app_date:s.app_date}),({dentist_id:l,app_date:n})=>{l&&n&&j(l,n)});const w=(l,n)=>{s.app_time=E(l),s.time_id=n};function E(l){return Y(l,"hh:mm A").format("HH:mm:ss")}function D(l){return Y(l,"HH:mm").format("hh:mm A")}const z=()=>s.post(route("patient.appointments.store"),{preserveScroll:!1,preserveState:!1});return(l,n)=>{const v=O("VDatePicker");return a(),r("form",{onSubmit:G(z,["prevent"])},[R(o(J),{size:"6xl",onClose:P},{header:c(()=>[Q]),body:c(()=>[t("div",W,[t("div",X,[t("div",Z,[t("div",ee,[te,y(t("input",{id:"patientId","onUpdate:modelValue":n[0]||(n[0]=e=>h.value=e),type:"text",class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Enter ID Number",disabled:""},null,512),[[T,h.value]])]),t("div",se,[oe,y(t("input",{id:"patientName",type:"text","onUpdate:modelValue":n[1]||(n[1]=e=>b.value=e),class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Patient Name",disabled:""},null,512),[[T,b.value]])]),t("div",ne,[ae,y(t("select",{id:"dentist","onUpdate:modelValue":n[2]||(n[2]=e=>o(s).dentist_id=e),class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},[le,(a(!0),r(A,null,V(B.dentists,e=>(a(),r("option",{value:e.dentist_id}," Dr. "+u(e.first_name)+" "+u(e.last_name),9,re))),256))],512),[[U,o(s).dentist_id,void 0,{number:!0}]]),o(s).errors.dentist_id?(a(),r("div",de,u(o(s).errors.dentist_id),1)):g("",!0)]),t("div",ie,[ue,y(t("select",{id:"appointmentType","onUpdate:modelValue":n[3]||(n[3]=e=>o(s).app_type=e),class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},[ce,(a(!0),r(A,null,V(o(x),e=>(a(),r("option",{value:e.services},u(e.services),9,pe))),256))],512),[[U,o(s).app_type]]),o(s).errors.app_type?(a(),r("div",me,u(o(s).errors.app_type),1)):g("",!0)]),t("div",_e,[be,R(v,{id:"appointmentDate",modelValue:o(s).app_date,"onUpdate:modelValue":n[4]||(n[4]=e=>o(s).app_date=e),modelModifiers:{string:!0},"input-debounce":500,"disabled-dates":I.value,"min-date":new Date,"max-date":new Date().setDate(new Date().getDate()+6),masks:$.value},{default:c(({togglePopover:e,inputValue:f})=>[t("input",{value:f,class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Select Appointment Date",onClick:e},null,8,ve)]),_:1},8,["modelValue","disabled-dates","min-date","max-date","masks"])]),t("div",fe,[ye,y(t("textarea",{id:"appointmentDescription",class:"w-full px-3 py-2 rounded-md drop-shadow-lg","onUpdate:modelValue":n[5]||(n[5]=e=>o(s).pat_notes=e),placeholder:"Enter Appointment Description"},null,512),[[T,o(s).pat_notes]]),o(s).errors.pat_notes?(a(),r("div",ge,u(o(s).errors.pat_notes),1)):g("",!0)])]),t("div",he,[o(s).dentist_id?(a(),r("h2",ke,"Morning Session")):g("",!0),t("div",xe,[(a(!0),r(A,null,V(S.value.morning,e=>(a(),r("div",null,[e.isBooked?(a(),N(o(M),{key:1,onClick:f=>w(e.time,e.times_id),type:"button",as:"button",class:"px-4 py-4 border-2 border-red-600",color:"red",disabled:""},{default:c(()=>[t("p",De,u(D(e.time)),1)]),_:2},1032,["onClick"])):(a(),N(o(M),{key:0,onClick:f=>w(e.time,e.times_id),type:"button",as:"button",class:"px-4 py-4 border-2 focus:bg-blue-800 focus:border-blue-800 focus:ring-blue-800 focus:text-white active:bg-blue-800 active:border-blue-800 active:ring-blue-800",outline:""},{default:c(()=>[t("p",we,u(D(e.time)),1)]),_:2},1032,["onClick"]))]))),256))]),o(s).dentist_id?(a(),r("h2",Ce,"Afternoon Session")):g("",!0),t("div",Ae,[(a(!0),r(A,null,V(S.value.afternoon,e=>(a(),r("div",null,[e.isBooked?(a(),N(o(M),{key:1,onClick:f=>w(e.time,e.times_id),type:"button",as:"button",class:"px-4 py-4 border-2 border-red-600",color:"red",disabled:""},{default:c(()=>[t("p",Ne,u(D(e.time)),1)]),_:2},1032,["onClick"])):(a(),N(o(M),{key:0,onClick:f=>w(e.time,e.times_id),type:"button",as:"button",class:"px-4 py-4 border-2",outline:""},{default:c(()=>[t("p",Ve,u(D(e.time)),1)]),_:2},1032,["onClick"]))]))),256))])])])])]),footer:c(()=>[t("div",{class:"flex justify-center"},[t("button",{onClick:P,type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600 mr-3 mb-3"}," Cancel "),Me])]),_:1})],40,K)}}};export{Pe as default};
