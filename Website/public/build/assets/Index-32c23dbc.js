import{r as i,K,c as V,T as X,a as Z,n as q,b as x,w as v,o as c,d as e,u as _,g as r,t as n,h as j,m as u,v as J,x as Q,f as M,y as m,i as N,j as W,F as Y,z as ee,O as te}from"./app-cdbf4484.js";import{_ as se}from"./Pagination-af17f53a.js";import le from"./MainLayout-ff052132.js";import{h as R,G as oe}from"./flowbite-vue-62d8acb5.js";import{m as ae}from"./module.esm-66530135.js";import"./SideBar-ddd0ab5f.js";import"./SluDentalLogo-a4fb04a6.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./DentistLinks-aebae790.js";import"./SideBarLinks-b569a21a.js";import"./DashboardIcon-abe5f48e.js";import"./UsersIcon-3089db95.js";import"./PatientIcon-56da3996.js";import"./PatientLinks-2a5a06a3.js";import"./AssistantLinks-c53c5408.js";import"./AdminLinks-fd8c5b60.js";import"./Header-33526c7b.js";import"./SideBarMobileView-d1951852.js";const ne={class:"absolute right-4 w-80"},ie=e("div",{class:"flex flex-col ml-2 max-sm:px-5"},[e("h1",{class:"w-20 h-8 text-2xl font-bold text-gray-700 max-sm:ml-4"},"Archives"),e("h6",{class:"h-1 text-xs text-gray-400 max-sm:ml-4"},[e("a",{href:"/admin"},"Home"),r(" > Archives ")])],-1),re={class:"relative flex flex-col flex-grow mt-8 bg-white rounded-xl"},ue={class:"px-5 py-6"},de={class:"grid items-center gap-4 laptop:grid-cols-16 desktop:grid-cols-12"},ce=e("label",{for:"simple-search",class:"sr-only"},"Search",-1),me={class:"col-start-1 laptop:col-end-5 desktop:col-end-4"},he=e("div",{class:"absolute laptop:left-60 desktop:left-72 top-8 p-2 ml-4 text-sm font-medium text-[#808080]"},[e("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})]),e("span",{class:"sr-only"},"Search")],-1),pe={class:"laptop:col-start-5 desktop:col-start-4"},fe={class:"bg-gray-200 rounded shadow-lg"},ve={class:"hover-bg-gray-300"},_e={class:"hover-bg-gray-300"},ye={class:"hover-bg-gray-300"},be={class:"hover-bg-gray-300"},xe={class:"hover-bg-gray-300"},ge={class:"relative desktop:top-2"},we={class:"w-full text-sm text-left text-gray-500"},ke={class:"text-xs text-left text-gray-400 bg-gray-50"},Ce={class:"p-6"},Se=e("div",{class:"flex items-center"}," ID NUMBER ",-1),Te=[Se],Ue={class:"p-6"},Ae={class:"p-6"},$e=e("th",{class:"p-6"},"SEX",-1),Ee=e("th",{class:"p-6"},"SCHOOL",-1),Oe=e("th",{class:"p-6"},"COURSE",-1),Ve=e("th",{class:"p-6"},"DEPARTMENT",-1),je=e("th",{class:"p-6"},null,-1),Me=["href"],Ne={class:"px-6 py-4"},Re={class:"px-6 py-4"},Be={class:"px-6 py-4"},De={class:"px-6 py-4"},Fe={class:"px-6 py-4"},Ie={class:"px-6 py-4"},Pe={class:"px-6 py-4"},Le=["onClick"],ze={class:"fixed inset-0 z-50 overflow-auto bg-gray-500 bg-opacity-75"},Ge=e("p",{class:"mb-4 text-lg font-semibold"},"Are you sure you want to unarchive this record?",-1),He={class:"flex justify-center w-full mt-6"},ct={__name:"Index",props:{archivedRecords:Object,students:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})},schools:{type:Object,default:()=>({})}},setup(B){const g=B;ae.start();const h=i(!1),w=K(),k=V(()=>w.props.flash.success,h.value=!0),C=V(()=>w.props.flash.error,h.value=!0),S=i(g.archivedRecords),T=X({archived_at:"",is_active:!0});function D(o){o.user.user_type=="student"?T.put(route("admin.archive.student.unarchive",o.id)):o.user.user_type=="employee"&&T.put(route("admin.archive.employee.unarchive",o.id))}const y=i(!1);let U;const F=o=>{U=o,y.value=!0},A=()=>{y.value=!1},I=()=>{D(U),window.location.reload(),A()};let a=i(g.filters.search),P=i("id_number"),L=i("asc"),p=i(""),d=i("");const l=Z({male:!1,female:!1,employee:!1,student:!1,all:!0});let b=null;const z=()=>{te.get("/admin/archives",{search:a.value,sex:p.value,patientType:d.value},{preserveState:!0,replace:!0})},f=()=>{b&&clearTimeout(b),b=setTimeout(()=>{z()},500)},G=()=>{P.value="id_number",L.value="asc"};q(a,()=>{a.value||G(),f()});const $=o=>{O(o),o==="male"?(l.male=!0,l.female=!1,p.value="male"):o==="female"&&(l.female=!0,l.male=!1,p.value="female"),a.value="",f()},E=o=>{switch(O(o),o){case"student":l.student=!0,l.employee=!1,d.value="student";break;case"employee":l.employee=!0,l.student=!1,d.value="employee";break}d.value=o,a.value="",f()},O=o=>{o!=="all"&&(l.all=!1)},H=()=>{l.all=!l.all,l.all=!0,l.male=!1,l.female=!1,l.student=!1,l.employee=!1,d.value="",p.value="",a.value="",f()};return(o,s)=>(c(),x(le,null,{mainContent:v(()=>[e("div",ne,[k.value&&h.value?(c(),x(_(R),{key:0,"x-data":"{shown: false, timeout:null}","x-init":"clearTimeout(timeout); shown = true; timeout = setTimeout(() => { shown = false }, 5000);","x-show.transition.opacity.out.duration.5000ms":"shown",closable:"",type:"success"},{default:v(()=>[r(n(k.value),1)]),_:1})):j("",!0),C.value&&h.value?(c(),x(_(R),{key:1,"x-data":"{shown: false, timeout:null}","x-init":"clearTimeout(timeout); shown = true; timeout = setTimeout(() => { shown = false }, 5000);","x-show.transition.opacity.out.duration.5000ms":"shown",closable:"",type:"danger"},{default:v(()=>[r(n(C.value),1)]),_:1})):j("",!0)]),ie,e("div",re,[e("div",ue,[e("div",de,[ce,e("div",me,[u(e("input",{type:"text",id:"simple-search","onUpdate:modelValue":s[0]||(s[0]=t=>Q(a)?a.value=t:a=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-3 p-2.5 dark:bg-white-700 dark:border-gray-300 dark:placeholder-gray-400 dark:text-black dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search Patient Name..."},null,512),[[J,_(a)]]),he]),e("div",pe,[M(_(oe),{placement:"bottom",text:"Filter"},{default:v(()=>[e("ul",fe,[e("li",ve,[e("label",null,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=t=>l.all=t),onChange:s[2]||(s[2]=t=>H())},null,544),[[m,l.all]]),r(" All ")])]),e("li",_e,[e("label",null,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=t=>l.male=t),onChange:s[4]||(s[4]=t=>$("male"))},null,544),[[m,l.male]]),r(" Male ")])]),e("li",ye,[e("label",null,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=t=>l.female=t),onChange:s[6]||(s[6]=t=>$("female"))},null,544),[[m,l.female]]),r(" Female ")])]),e("li",be,[e("label",null,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=t=>l.student=t),onChange:s[8]||(s[8]=t=>E("student"))},null,544),[[m,l.student]]),r(" Student ")])]),e("li",xe,[e("label",null,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[9]||(s[9]=t=>l.employee=t),onChange:s[10]||(s[10]=t=>E("employee"))},null,544),[[m,l.employee]]),r(" Employee ")])])])]),_:1})])]),e("div",ge,[e("table",we,[e("thead",ke,[e("tr",null,[e("th",Ce,[e("button",{onClick:s[11]||(s[11]=t=>o.sort("id_number"))},Te)]),e("th",Ue,[e("button",{onClick:s[12]||(s[12]=t=>o.sort("last_name"))}," LAST NAME ")]),e("th",Ae,[e("button",{onClick:s[13]||(s[13]=t=>o.sort("first_name"))}," FIRST NAME ")]),$e,Ee,Oe,Ve,je])]),e("tbody",null,[(c(!0),N(Y,null,W(S.value.data,t=>(c(),N("tr",{href:`/admin/archives/${t.id}`,class:"table-row bg-white border-b",key:t.id},[e("th",Ne,n(t.id_number),1),e("th",Re,n(t.last_name),1),e("th",Be,n(t.first_name),1),e("th",De,n(t.sex),1),e("th",Fe,n(t.school),1),e("th",Ie,n(t.course),1),e("th",Pe,n(t.department),1),e("th",null,[e("button",{onClick:Ke=>F(t),class:"w-24 h-10 bg-yellow-400 rounded-lg max-sm:w-full hover:bg-yellow-500 hover:text-white text-gray-50"},"Unarchive",8,Le)])],8,Me))),128))])])])]),u(e("div",ze,[e("div",{class:"flex items-center justify-center min-h-screen"},[e("div",{class:"bg-white p-8 rounded-md shadow-md"},[Ge,e("div",{class:"flex justify-end"},[e("button",{onClick:A,class:"mr-4 px-4 py-2 text-white bg-gray-500 rounded-md"},"Cancel"),e("button",{onClick:I,class:"px-4 py-2 text-white bg-yellow-500 rounded-md"},"Unarchive")])])])],512),[[ee,y.value]]),e("div",He,[M(se,{links:S.value.links},null,8,["links"])])])]),_:1}))}};export{ct as default};
