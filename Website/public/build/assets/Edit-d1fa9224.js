import{r,s as J,l as c,n as Y,T as K,p as Q,i as d,f as j,w as b,u as o,e as W,o as i,d as t,m as x,v as B,q as E,F as N,j as R,t as m,h as w,b as S}from"./app-cdbf4484.js";import{m as T,s as X}from"./flowbite-vue-62d8acb5.js";import{h as H}from"./index-89e1533b.js";const Z=["onSubmit"],ee=t("div",{class:"items-center px-4"},[t("h1",{class:"text-xl font-semibold text-gray-800"}," Book An Appointment ")],-1),te={class:"p-2"},se={class:"flex flex-row gap-12 max-md:flex-col"},ae={class:"w-[25rem]"},oe={class:"w-[25rem] mb-4"},ne=t("label",{for:"patientId",class:"block font-semibold"},"ID Number",-1),ie={class:"w-[25rem] mb-4"},le=t("label",{for:"patientName",class:"block font-semibold"},"Patient Name",-1),re={class:"mb-4 w-[25rem]"},de=t("label",{for:"dentist",class:"block font-semibold"},"Dentist",-1),ue=t("option",{disabled:"",value:""}," Please select a dentist ",-1),pe=["value"],me={key:0,class:"text-red-600"},ce={class:"w-[25rem] mb-4"},_e=t("label",{for:"appointmentDate",class:"block font-semibold"},"Appointment Date",-1),ve=["value","onClick"],be={class:"mb-4 w-[25rem]"},fe=t("label",{for:"appointmentType",class:"block font-semibold"},"Appointment Type",-1),ye=t("option",{value:"",disabled:"",selected:""}," Please select one ",-1),ge=["value"],he={key:0,class:"text-red-600"},ke={class:"mb-4 w-[25rem]"},xe=t("label",{for:"appointmentDescription",class:"block font-semibold"},"Appointment Description",-1),we={key:0,class:"text-red-600"},De={class:""},Ce={key:0,class:"mb-2 text-lg font-semibold text-center"},Ve={class:"grid grid-cols-5 gap-4 mb-4"},Ae={class:"text-base"},Ne={class:"text-base"},Re={key:1,class:"mb-2 text-lg font-semibold text-center"},Se={class:"grid grid-cols-5 gap-4"},Te={class:"text-base"},Me={class:"text-base"},Be=t("button",{type:"submit",as:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 mr-3 mb-3"}," Book ",-1),je={__name:"Edit",props:{dentists:{type:Array},appointment:{type:Object},students:{type:Object,default:()=>({})},employees:{type:Object,default:()=>({})}},setup(P,{emit:I}){const l=P,U=()=>{I("close")};r(null);const u=r(""),y=r(""),g=r(""),D=r(""),h=r(""),$=r(""),C=r(""),p=r({last_name:"",first_name:"",middle_name:"",course:"",year:""}),_=r({last_name:"",first_name:"",middle_name:""});let f=r({});J(async()=>{l.appointment.user.user_type==="student"?(u.value=l.appointment.user.student.id_number,y.value=l.appointment.user.student.last_name+", ",g.value=l.appointment.user.student.first_name,D.value=l.appointment.user.student.middle_name,h.value=y.value+g.value+", "+D.value,C.value=y.value+g.value,a.name=C.value,(l.appointment.user.student.course=="Doctor of Medicine"||l.appointment.user.student.course=="BSN")&&l.appointment.user.student.year!="1st Year"?f=(await c.get("/patient/service/annual")).data:f=(await c.get("/patient/service/regular")).data):(u.value=l.user.employee.id_number,y.value=l.user.employee.last_name+", ",g.value=l.user.employee.first_name,D.value=l.user.employee.middle_name,h.value=y.value+g.value+", "+D.value,C.value=y.value+g.value,a.name=C.value,f=(await c.get("/patient/service/annual")).data)});const O=async()=>{if(u.value.length===7&&u.value)try{if(u.value.includes(" ")){const s=(await c.get(route("patient.appointments.showEmployee",u.value))).data;_.value.last_name=s.last_name,_.value.first_name=s.first_name,_.value.middle_name=s.middle_name,h.value=_.value.last_name+", "+_.value.first_name+", "+_.value.middle_name,a.name=_.value.last_name+", "+_.value.first_name,f=(await c.get(route("patient.getemployeeservice"))).data}else{const s=(await c.get(route("patient.appointment.showStudent",u.value))).data;p.value.last_name=s.last_name,p.value.first_name=s.first_name,p.value.middle_name=s.middle_name,p.value.course=s.course,p.value.year=s.year,h.value=p.value.last_name+", "+p.value.first_name+", "+p.value.middle_name,a.name=p.value.last_name+", "+p.value.first_name,(s.course=="Doctor of Medicine"||s.course=="BSN")&&s.year!="1st Year"?f=(await c.get(route("patient.getannualservices"))).data:f=(await c.get(route("patient.getregularservices"))).data}}catch(n){console.error(n)}else $.value=""};Y(u,()=>{O()},{immediate:!0});const z=r([{repeat:{weekdays:[1]}}]),F=r({modelValue:"YYYY-MM-DD"}),M=r({}),q=async(n,s)=>{try{const v=await c.get(route("patient.appointments.getAvailableTime",{id:n,date:s}));M.value=v.data}catch(v){console.error(v)}},a=K({name:null,dentist_id:l.appointment.dentist_id,app_date:null,app_time:null,app_type:l.appointment.app_type,pat_notes:l.appointment.pat_notes,time_id:null,old_time_id:null});Y(()=>({dentist_id:a.dentist_id,app_date:a.app_date}),({dentist_id:n,app_date:s})=>{n&&s&&q(n,s)});const V=(n,s)=>{a.app_time=L(n),a.time_id=s,a.old_time_id=l.appointment.availability_id};function L(n){return H(n,"hh:mm A").format("HH:mm:ss")}function A(n){return H(n,"HH:mm").format("hh:mm A")}const G=()=>a.put(route("patient.appointments.edit",l.appointment.app_id),{preserveScroll:!1,preserveState:!1});return(n,s)=>{const v=Q("VDatePicker");return i(),d("form",{onSubmit:W(G,["prevent"])},[j(o(X),{size:"6xl",onClose:U},{header:b(()=>[ee]),body:b(()=>[t("div",te,[t("div",se,[t("div",ae,[t("div",oe,[ne,x(t("input",{id:"patientId","onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),type:"text",disabled:"",class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Enter ID Number"},null,512),[[B,u.value]])]),t("div",ie,[le,x(t("input",{id:"patientName",type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>h.value=e),class:"w-full px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Patient Name",disabled:""},null,512),[[B,h.value]])]),t("div",re,[de,x(t("select",{id:"dentist","onUpdate:modelValue":s[2]||(s[2]=e=>o(a).dentist_id=e),class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},[ue,(i(!0),d(N,null,R(P.dentists,e=>(i(),d("option",{value:e.dentist_id}," Dr. "+m(e.first_name)+" "+m(e.last_name),9,pe))),256))],512),[[E,o(a).dentist_id,void 0,{number:!0}]]),o(a).errors.dentist_id?(i(),d("div",me,m(o(a).errors.dentist_id),1)):w("",!0)]),t("div",ce,[_e,j(v,{id:"appointmentDate",modelValue:o(a).app_date,"onUpdate:modelValue":s[3]||(s[3]=e=>o(a).app_date=e),modelModifiers:{string:!0},"input-debounce":500,"disabled-dates":z.value,"min-date":new Date,"max-date":new Date().setDate(new Date().getDate()+6),masks:F.value},{default:b(({togglePopover:e,inputValue:k})=>[t("input",{value:k,class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg",placeholder:"Select Appointment Date",onClick:e},null,8,ve)]),_:1},8,["modelValue","disabled-dates","min-date","max-date","masks"])]),t("div",be,[fe,x(t("select",{id:"appointmentType","onUpdate:modelValue":s[4]||(s[4]=e=>o(a).app_type=e),disabled:"",class:"border border-black w-[25rem] px-3 py-2 rounded-md drop-shadow-lg"},[ye,(i(!0),d(N,null,R(o(f),e=>(i(),d("option",{value:e.services},m(e.services),9,ge))),256))],512),[[E,o(a).app_type]]),o(a).errors.app_type?(i(),d("div",he,m(o(a).errors.app_type),1)):w("",!0)]),t("div",ke,[xe,x(t("textarea",{id:"appointmentDescription",class:"w-full px-3 py-2 rounded-md drop-shadow-lg","onUpdate:modelValue":s[5]||(s[5]=e=>o(a).pat_notes=e),placeholder:"Enter Appointment Description"},null,512),[[B,o(a).pat_notes]]),o(a).errors.pat_notes?(i(),d("div",we,m(o(a).errors.pat_notes),1)):w("",!0)])]),t("div",De,[o(a).dentist_id?(i(),d("h2",Ce,"Morning Session")):w("",!0),t("div",Ve,[(i(!0),d(N,null,R(M.value.morningTime,e=>(i(),d("div",null,[e.isBooked?(i(),S(o(T),{key:1,onClick:k=>V(e.time,e.availability_id),type:"button",as:"button",class:"px-4 py-4 border-2 border-red-600",color:"red",disabled:""},{default:b(()=>[t("p",Ne,m(A(e.time)),1)]),_:2},1032,["onClick"])):(i(),S(o(T),{key:0,onClick:k=>V(e.time,e.availability_id),type:"button",as:"button",class:"px-4 py-4 border-2 focus:bg-blue-800 focus:border-blue-800 focus:ring-blue-800 focus:text-white active:bg-blue-800 active:border-blue-800 active:ring-blue-800",outline:""},{default:b(()=>[t("p",Ae,m(A(e.time)),1)]),_:2},1032,["onClick"]))]))),256))]),o(a).dentist_id?(i(),d("h2",Re,"Afternoon Session")):w("",!0),t("div",Se,[(i(!0),d(N,null,R(M.value.eveningTime,e=>(i(),d("div",null,[e.isBooked?(i(),S(o(T),{key:1,onClick:k=>V(e.time,e.availability_id),type:"button",as:"button",class:"px-4 py-4 border-2 border-red-600",color:"red",disabled:""},{default:b(()=>[t("p",Me,m(A(e.time)),1)]),_:2},1032,["onClick"])):(i(),S(o(T),{key:0,onClick:k=>V(e.time,e.availability_id),type:"button",as:"button",class:"px-4 py-4 border-2",outline:""},{default:b(()=>[t("p",Te,m(A(e.time)),1)]),_:2},1032,["onClick"]))]))),256))])])])])]),footer:b(()=>[t("div",{class:"flex justify-center"},[t("button",{onClick:U,type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600 mr-3 mb-3"}," Cancel "),Be])]),_:1})],40,Z)}}};export{je as default};
